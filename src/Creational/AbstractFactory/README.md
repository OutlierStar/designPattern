
在上述示例中，我们首先定义了抽象产品接口 ProductA 和 ProductB，分别包含了具体产品类所需的方法。

然后，我们定义了具体产品类 ConcreteProductA1、ConcreteProductA2、ConcreteProductB1 和 ConcreteProductB2，它们分别实现了抽象产品接口的方法。

接下来，我们定义了抽象工厂接口 AbstractFactory，其中包含了创建不同产品的抽象方法。

然后，我们实现了具体工厂类 ConcreteFactory1 和 ConcreteFactory2，它们分别实现了抽象工厂接口的方法，并返回具体的产品对象。

最后，在主函数中，我们创建了具体工厂对象 ConcreteFactory1 和 ConcreteFactory2，分别使用工厂对象创建具体产品对象，并调用产品的方法进行操作。

通过抽象工厂模式，我们可以创建一组相关或相互依赖的产品对象，而无需关心具体的产品类，实现了产品的创建与使用的解耦。

## 他与工厂方法模式的区别

抽象工厂模式和工厂方法模式是两种不同的创建型设计模式，它们有以下区别：

1. 主要目的和关注点：
   - 工厂方法模式（Factory Method Pattern）主要关注于定义一个用于创建对象的接口，由子类决定具体创建哪个对象。它将对象的创建延迟到子类，通过多态性实现了对象的创建与使用的解耦。
   - 抽象工厂模式（Abstract Factory Pattern）主要关注于创建一系列相关或相互依赖的对象，而无需关心具体的产品类。它提供了一个接口，用于创建一族产品对象，具体的产品创建由具体工厂类负责。

2. 关注的层次：
   - 工厂方法模式关注于单个对象的创建。每个具体工厂类只负责创建一种具体产品。
   - 抽象工厂模式关注于多个相关对象的创建。每个具体工厂类负责创建一族相关产品。

3. 结构差异：
   - 工厂方法模式通常包含一个抽象工厂类和多个具体工厂类，每个具体工厂类负责创建一种具体产品。
   - 抽象工厂模式通常包含一个抽象工厂接口和多个具体工厂类，每个具体工厂类负责创建一族相关产品。

4. 使用场景：
   - 工厂方法模式适用于需求变化频繁，需要通过扩展工厂类来增加新产品的情况。它提供了一种可扩展的方式来创建和使用对象。
   - 抽象工厂模式适用于需要创建一组相关或相互依赖的产品对象，并且希望将产品的创建与使用解耦的情况。

总的来说，工厂方法模式着重于对象创建的延迟和多态性，而抽象工厂模式着重于一组相关对象的创建和使用的解耦。选择哪种模式取决于具体的需求和设计目标。